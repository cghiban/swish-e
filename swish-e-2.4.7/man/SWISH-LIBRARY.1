.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SWISH-LIBRARY 1"
.TH SWISH-LIBRARY 1 "2009-04-04" "2.4.7" "SWISH-E Documentation"
.SH "NAME"
SWISH\-LIBRARY \- Interface to the Swish\-e C library
.SH "OVERVIEW"
.IX Header "OVERVIEW"
The C library in an interface to the Swish-e search code.  It provides
a way to embed Swish-e into your applications.
This \s-1API\s0 is based on Swish-e version 2.3.
.PP
\&\fBNote:\fR This is a \s-1NEW\s0 \s-1API\s0 as of Swish-e version 2.3.
The C language interface has changed as has the perl interface to Swish\-e.
The new Perl interface is the \s-1SWISH::API\s0 module and is included with the Swish-e
distribution.
The old \s-1SWISHE\s0 perl module has been rewritten to work with the new \s-1API\s0.  The \s-1SWISHE\s0 perl module
is no longer included with the Swish-e distribution, but can be downloaded
from the Swish-e web site.
.PP
The advantage of the library is that the index files or files can be opened one time
and many queries made on the open index.  This saves the startup time required
to fork and run the swish-e binary, and the expensive time of opening up the
index file.  Some benchmarks have shown a three fold increase in speed.
.PP
The downside is that your program now has more code and data in it (the index tables can
use quite a bit of memory), and if a fatal error happens in swish it will bring down your
program.  These are things to think about, especially if embedding swish into a web server
such as Apache where there are many processes serving requests.
.PP
The best way to learn about the library is to look at two files included with
the Swish-e distribution that make use of the library.
.IP "src/libtest.c" 4
.IX Item "src/libtest.c"
This file gives a basic overview of linking a C program with the Swish-e library.
Not all available functions are used in that example, but it should give you a good overview
of building a C program with swish\-e.
.Sp
To build and run libtest chdir to the src directory and run the commands:
.Sp
.Vb 2
\&    $ make libtest
\&    $ ./libtest [optional name of index file]
.Ve
.Sp
You will be prompted for the search words.  The default index used is \fIindex.swish\-e\fR.
This can be overridden by placing a list of index files in a quote-protected string.
.Sp
.Vb 1
\&    $ ./libtest 'index1 index2 index3'
.Ve
.IP "perl/API.xs" 4
.IX Item "perl/API.xs"
The \fI\s-1API\s0.xs\fR file is a Perl \*(L"xsub\*(R" interface to the C library and is part of the
\&\s-1SWISH::API\s0 Perl module.  This is an object-oriented interface to the Swish-e library
and demonstrates how the various search \*(L"objects\*(R" are created by C calls and how
they are destroyed when no longer needed.
.SH "Installing the Swish-e library"
.IX Header "Installing the Swish-e library"
The Swish-e library is installed when you run \*(L"make install\*(R" when building 
Swish\-e.  No extra installation steps are required.
.PP
The library consists of a header file \*(L"swish\-e.h\*(R" and a library
\&\*(L"libswish\-e.*\*(R" that can either be a static or shared library depending on 
your platform.
.SH "Library Overview"
.IX Header "Library Overview"
When you first attach to an index file (or index files) you are returned a \*(L"swish handle\*(R".
From the handle you create one or more \*(L"search objects\*(R" which holds
the parameters to query the index, such as the query string, sort order, search phrase delimiter,
limit parameters and \s-1HTML\s0 structure bits.  The \*(L"object\*(R" is really just a pointer to a C structure, but
it's helpful to think of it as an object that data and functionality associated with it.
.PP
The search object is used to query the index.  A query returns a \*(L"results object\*(R".
The results object holds the number of hits, the parsed query per index, and the result set.
The results object keeps track of the current position in the result set.
You may \*(L"seek\*(R" to a specific record within the result set (useful for displaying a page of results).
.PP
Finally, a result object represents a single result from the result list.  A result object provides
access to the result's properties (such as file name, rank, etc.).
.PP
In addition to results, there are functions available to access the header values stored
in the index file, functions to check and report errors, and a few utility functions.
.SH "Available Functions"
.IX Header "Available Functions"
Below is the list of available function included in the Swish-e C language \s-1API\s0.
.PP
These functions (and typedefs) are defined in the \fIswish\-e.h\fR header file.
The common objects (e.g. structures) used are:
.PP
.Vb 5
\&    SW_HANDLE  - swish handle that associates with an index file
\&    SW_SEARCH  - search "object" that holds search parameters
\&    SW_RESULTS - results "object" that holds a result set
\&    SW_RESULT  - a single result used for accessing the result's properties
\&    SW_FUZZYWORD - used for fuzzy (stemming) word conversion
.Ve
.Sh "Searching"
.IX Subsection "Searching"
.IP "\s-1SW_HANDLE\s0 SwishInit(char *IndexFiles);" 4
.IX Item "SW_HANDLE SwishInit(char *IndexFiles);"
This functions opens and reads the header info of the index files
included in IndexFiles string.  The string should contain a space-separated
list of index files.
.Sp
.Vb 2
\&    SW_HANDLE myhandle;
\&    myhandle = SwishInit("file1.idx");
.Ve
.Sp
Typically you will open a handle at the beginning of your program and use it to make
multiple queries on an index.
.Sp
This function will always return a swish handle.  You must check for errors, and on
error free the memory used by the handle, or abort.
.Sp
Here's an example of aborting:
.Sp
.Vb 4
\&    SW_HANDLE swish_handle;
\&    swish_handle = SwishInit("file1.idx file2.idx");
\&    if ( SwishError( swish_handle ) )
\&        SwishAbortLastError( swish_handle );
.Ve
.Sp
And here's an example of catching the error:        
.Sp
.Vb 8
\&    SW_HANDLE swish_handle;
\&    swish_handle = SwishInit("file1.idx file2.idx");
\&    if ( SwishError( swish_handle ) )
\&    {
\&        printf("Failed to connect to swish. %s\en", SwishErrorString( swish_handle ) );
\&        SwishClose( swish_handle );  /* free the memory used */
\&        return 0;
\&    }
.Ve
.Sp
You may have more than one handle active at a time.
.Sp
Swish-e will not tell you if the index file changes on disk (such as after reindexing).
In a persistent environment (e.g. mod_perl) the calling program should check to see if
the index file has changed on disk.  A common way to do this is to store the inode
number before opening the index file(s), and then stat the file name every so often
and reopen the index files if the inode number changes.
.IP "void SwishClose(\s-1SW_HANDLE\s0 handle);" 4
.IX Item "void SwishClose(SW_HANDLE handle);"
This function closes and frees the memory of a Swish handle.
Every swish handle should be freed when done searching the index.
Failing to close the handle will result in a memory leak.
.IP "\s-1SW_SEARCH\s0 New_Search_Object(\s-1SW_HANDLE\s0 handle, const char *query);" 4
.IX Item "SW_SEARCH New_Search_Object(SW_HANDLE handle, const char *query);"
Returns a new search \*(L"object\*(R".  The search object holds the parameters used for searching
an index.  A single search object can be used to query the index multiple times.
The available settings listed below are \*(L"sticky\*(R" in that they remain set on the search
object until change.
.IP "int SwishGetStructure( \s-1SW_SEARCH\s0 srch );" 4
.IX Item "int SwishGetStructure( SW_SEARCH srch );"
Returns the \*(L"structure\*(R" flag of the search object passed or 0 if the search
object is \s-1NULL\s0.
.IP "void SwishPhraseDelimiter( \s-1SW_SEARCH\s0 srch, char delimiter );" 4
.IX Item "void SwishPhraseDelimiter( SW_SEARCH srch, char delimiter );"
Sets the phrase delimiter character.  The default is double\-quotes.
.IP "char SwishGetPhraseDelimiter( \s-1SW_SEARCH\s0 srch );" 4
.IX Item "char SwishGetPhraseDelimiter( SW_SEARCH srch );"
Returns the phrase delimiter character used in the search object or 0 if the
search object is \s-1NULL\s0.
.IP "void SwishSetStructure( \s-1SW_SEARCH\s0 srch, int structure );" 4
.IX Item "void SwishSetStructure( SW_SEARCH srch, int structure );"
Sets the \*(L"structure\*(R" flag in the search object.  The structure flag is used to limit
searches to parts of \s-1HTML\s0 files (such as to the title or headers).  The default
is to not limit.  This provides the functionality of the \-H command line switch.
.IP "void SwishPhraseDelimiter( \s-1SW_SEARCH\s0 srch, char delimiter );" 4
.IX Item "void SwishPhraseDelimiter( SW_SEARCH srch, char delimiter );"
Sets the phrase delimiter character.  The default is double\-quotes.
.IP "void SwishSetSort( \s-1SW_SEARCH\s0 srch, char *sort );" 4
.IX Item "void SwishSetSort( SW_SEARCH srch, char *sort );"
Sets the sort order of the results.  This is the same as the \-s switch used
with the swish-e binary.
.IP "void SwishSetQuery( \s-1SW_SEARCH\s0 srch, char *query );" 4
.IX Item "void SwishSetQuery( SW_SEARCH srch, char *query );"
Sets the query string in the search object.  This typically is not needed since
it can be set when creating the search object or when executing a query.
.IP "void SwishSetSearchLimit( \s-1SW_SEARCH\s0 srch, char *propertyname, char *low, char *hi);" 4
.IX Item "void SwishSetSearchLimit( SW_SEARCH srch, char *propertyname, char *low, char *hi);"
Sets the limit parameters for a search.  Provides the same functionality as the \-L command
line switch.
You may specify a range of property values that search results must be within.
You may call \fISwishSetSearchLimit()\fR only one time for each property (but can set
limits on more than one property at a time).
.Sp
Unlike the other settings on the search object, once you run a query on the
search object you must call \fISwishResetSearchLimit()\fR to change or clear
the limit parameters.
.IP "void SwishResetSearchLimit( \s-1SW_SEARCH\s0 srch );" 4
.IX Item "void SwishResetSearchLimit( SW_SEARCH srch );"
Resets the limits set on a search object set by \fISwishSetSearchLimit()\fR.
.IP "void Free_Search_Object( \s-1SW_SEARCH\s0 srch );" 4
.IX Item "void Free_Search_Object( SW_SEARCH srch );"
Frees the search object.  This must be called when done with the 
search object.  Generally, you can reuse a search object for
multiple queries so typically you would call this right before
calling \fISwishClose()\fR.
.Sp
You may free the search object before freeing and
generated results objects.
.IP "\s-1SW_RESULTS\s0 SwishExecute( \s-1SW_SEARCH\s0 search, const char *query);" 4
.IX Item "SW_RESULTS SwishExecute( SW_SEARCH search, const char *query);"
Searches the index or indexes based on the parameters in the search object.
Returns a results object.  See below for functions to access the data stored
in the results object.
.Sp
You should always check for errors after calling \fISwishExecute()\fR.
.IP "\s-1SW_RESULTS\s0 SwishQuery(\s-1SW_HANDLE\s0, const char *words );" 4
.IX Item "SW_RESULTS SwishQuery(SW_HANDLE, const char *words );"
This is a short-cut function that bypasses the creation of a
search object (actually, bypasses the need to create and free a search object).
This only allows passing in a query string; other search parameters cannot be set.
The results are sorted by rank.
.Sp
You should always check for errors after calling \fISwishQuery()\fR.
.Sh "Reading Results"
.IX Subsection "Reading Results"
.IP "int SwishHits( \s-1SW_RESULTS\s0 results );" 4
.IX Item "int SwishHits( SW_RESULTS results );"
Returns the number of results in the results object.
.IP "\s-1SWISH_HEADER_VALUE\s0 SwishParsedWords( \s-1SW_RESULTS\s0, const char *index_name );" 4
.IX Item "SWISH_HEADER_VALUE SwishParsedWords( SW_RESULTS, const char *index_name );"
Returns the tokenized query.  Words are split by WordCharacters and stopwords are
removed.  The parsed words are useful for highlighting search terms in your
program.
.Sp
The \*(L"index_name\*(R" is the name of the index supplied in the \fISwishInit()\fR function call.
.Sp
Returns a \s-1SWISH_HEADER_VALUE\s0 union of type \s-1SWISH_LIST\s0 which is a char **.
See src/libtest.c for an example of accessing the strings in this list, but in
general you may cast this to a (char **).
.IP "\s-1SWISH_HEADER_VALUE\s0 SwishRemovedStopwords( \s-1SW_RESULTS\s0, const char *index_name );" 4
.IX Item "SWISH_HEADER_VALUE SwishRemovedStopwords( SW_RESULTS, const char *index_name );"
Returns a list of stopwords removed from the input query.
.Sp
Returns a \s-1SWISH_HEADER_VALUE\s0 union of type \s-1SWISH_LIST\s0 which is a char **.
See src/libtest.c for an example of accessing the strings in this list, but in
general you may cast this to a (char **).
.IP "int SwishSeekResult( \s-1SW_RESULTS\s0, int position );" 4
.IX Item "int SwishSeekResult( SW_RESULTS, int position );"
Sets the current seek position in the list of results, with position zero
being the first record (unlike \-b where one is the first result).
.Sp
Returns the position or a negative number on error.
.IP "\s-1SW_RESULT\s0 SwishNextResult( \s-1SW_RESULTS\s0 );" 4
.IX Item "SW_RESULT SwishNextResult( SW_RESULTS );"
Returns the next result, or \s-1NULL\s0 if not more results are available.
.Sp
The result object returned does not need to be freed after use
(unlike the swish handle, search object, and results object).
.IP "const char *SwishResultPropertyStr(\s-1SW_RESULT\s0, char *propertyname);" 4
.IX Item "const char *SwishResultPropertyStr(SW_RESULT, char *propertyname);"
This function is mostly useful for testing as it returns odd results on errors.
.Sp
Aborts if called with a \s-1NULL\s0 \s-1SW_RESULT\s0 object
.Sp
Returns a string value of the specified property.
.Sp
Returns the empty string "" if the current result does not have
the specified property assigned.
.Sp
Returns the string \*(L"(null)\*(R" on invalid property name (i.e. property name
is not defined in the index) and sets an error (see below) indicating the
invalid property name.
.Sp
The string returned does not need to be freed, but is only valid
for the current result.  If you wish to save the string you must
copy it locally.
.Sp
Dates are formatted using the hard-coded format string: \*(L"%Y\-%m\-%d \f(CW%H:\fR%M:%S\*(R" in
localtime.
.IP "unsigned long SwishResultPropertyULong(\s-1SW_RESULT\s0 r, char *propertyname);" 4
.IX Item "unsigned long SwishResultPropertyULong(SW_RESULT r, char *propertyname);"
Returns a numeric property as an unsigned long.
Numeric properties are used for both PropertyNamesNumeric and PropertyNamesDate
type of properties.  Dates are returned as a unix timestamp as reported by the system
when the index was created.
.Sp
Swish-e will abort if called with a \s-1NULL\s0 \s-1SW_RESULT\s0 object.  Without the \s-1SW_RESULT\s0 object
swish-e cannot set any error codes.
.Sp
On error returns \s-1UMAX_LONG\s0.  This is commonly defined in limits.h.
Check \fISwishError()\fR (see below) for the type of error.
.Sp
If \fISwishError()\fR returns false (zero)
then it simply means that this result does not have any data for the specified
property.
.Sp
If \fISwishError()\fR returns true (non\-zero) then either the propertyname specified is
invalid, or the property requested is not a numeric (or date) property (e.g. it's
a string property).
.Sp
See below on how to fetch the specific error message when \fISwishError()\fR is true.
.IP "PropValue *getResultPropValue (\s-1SW_RESULT\s0 r, char *propertyname, int \s-1ID\s0 );" 4
.IX Item "PropValue *getResultPropValue (SW_RESULT r, char *propertyname, int ID );"
This is a low-level function to fetch a property regardless of type.
This is likely the best function for accessing properties.
.Sp
Swish-e will abort if called with a \s-1NULL\s0 \s-1SW_RESULT\s0 object.  Propertyname is the name
of the property.  \s-1ID\s0 is the id number of the property, if known.  \s-1ID\s0 is not normally
used in the \s-1API\s0, but it's purpose is to avoid looking up the property \s-1ID\s0 for every
result displayed.
.Sp
The return PropValue is a structure that contains a flag to indicate the
type, and a union that holds the property value.  They flags and structure are
defined in swish\-e.h.
.Sp
The property must be copied locally and the returned \*(L"PropValue\*(R" value must be freed by
calling \fIfreeResultPropValue()\fR to avoid a memory leak.
.Sp
On error returns \s-1NULL\s0.
Check \fISwishError()\fR (see below) for the type of error.
.Sp
If returns \s-1NULL\s0 but \fISwishError()\fR returns false (zero)
then it simply means that this result does not have any data for the specified
property.
.Sp
If \fISwishError()\fR returns true (non\-zero) then the property name specified
is invalid (i.e. not defined for the index).
.Sp
See below on how to fetch the specific error message when \fISwishError()\fR is true.
.Sp
See perl/API.xs for an example on using this function.
.IP "void freeResultPropValue(void)" 4
.IX Item "void freeResultPropValue(void)"
Frees the \*(L"PropValue\*(R" returned after calling \fIgetResultPropValue()\fR.
.IP "void Free_Results_Object( \s-1SW_RESULTS\s0 results );" 4
.IX Item "void Free_Results_Object( SW_RESULTS results );"
Frees the results object (frees the result set).  This must be called
when done reading the results and before calling \fISwishClose()\fR.
.Sh "Accessing the Index Header Values"
.IX Subsection "Accessing the Index Header Values"
Each index file has associated header values that describe the index.  These functions
provide access to this data.  The header data is returned as a union \s-1SWISH_HEADER_VALUE\s0,
and a pointer to a \s-1SWISH_HEADER_TYPE\s0 is passed in and the returned value indicates the
type of data that is returned.  See src/libtest.c and perl/API.xs for examples.
.IP "const char **SwishHeaderNames( \s-1SW_HANDLE\s0 );" 4
.IX Item "const char **SwishHeaderNames( SW_HANDLE );"
Returns the list of possible header names.  This list is the same for all index
files of a given version of Swish\-e.  It provides a way to gain access to all
headers without having to list them in your program.
.IP "const char **SwishIndexNames( \s-1SW_HANDLE\s0 );" 4
.IX Item "const char **SwishIndexNames( SW_HANDLE );"
Returns a list of index files opened.  This is just the list of index files
specified in the \fISwishInit()\fR call.  You need the name of the index file
to access a specific index's header values.
.IP "\s-1SWISH_HEADER_VALUE\s0 SwishHeaderValue( \s-1SW_HANDLE\s0, const char *index_name, const  char *cur_header, \s-1SWISH_HEADER_TYPE\s0 *type );" 4
.IX Item "SWISH_HEADER_VALUE SwishHeaderValue( SW_HANDLE, const char *index_name, const  char *cur_header, SWISH_HEADER_TYPE *type );"
Fetches the header value for the given index file, and the header name.  The call
sets the \*(L"type\*(R" passed in to the type of value returned.
.Sp
See src/libtest.c and perl/API.xs for examples.
.IP "\s-1SWISH_HEADER_VALUE\s0 SwishResultIndexValue( \s-1SW_RESULT\s0, const char *name, \s-1SWISH_HEADER_TYPE\s0 *type );" 4
.IX Item "SWISH_HEADER_VALUE SwishResultIndexValue( SW_RESULT, const char *name, SWISH_HEADER_TYPE *type );"
This is like \fISwishHeaderValue()\fR above, but instead of supplying an index file name and
a swish handle, supply a result object and the header value is fetched from the result's
related index file.
.Sh "Accessing Property Meta Data"
.IX Subsection "Accessing Property Meta Data"
In addition to the pre-defined standard properties, you have the option
of adding additional \*(L"meta\*(R" properties to be indexed and/or added to the
list of properties returned with each result.  Consult the sections on the
MetaNames and PropteryNames directives in the \s-1CONFIGURATION\s0 \s-1FILE\s0 for an
explanation of how to do this.
.PP
These functions provide access to the meta data stored in an index.  You can
use them to determine what meta/property information is available for an index
including all the pre-defined standard properties.  See libtest.c for an example.
.IP "\s-1SWISH_META_LIST\s0 SwishMetaList( \s-1SW_HANDLE\s0, const char *index_name );" 4
.IX Item "SWISH_META_LIST SwishMetaList( SW_HANDLE, const char *index_name );"
Returns the list of meta entries for the given index file  as a null-terminated 
array of \s-1SW_META\s0 objects.  Use the functions below to extract specific fields
from the \s-1SW_META\s0 structure.  Meta's are distinct from properties.
.IP "\s-1SWISH_META_LIST\s0 SwishPropertyList( \s-1SW_HANDLE\s0, const char *index_name );" 4
.IX Item "SWISH_META_LIST SwishPropertyList( SW_HANDLE, const char *index_name );"
This function is the same as \fISwishMetaList()\fR but it returns an array of properties
as opposed to meta objects.  Property attributes can be extracted in the same
was as meta objects using the functions below.
.IP "\s-1SWISH_META_LIST\s0 SwishResultMetaList( \s-1SW_RESULT\s0 );" 4
.IX Item "SWISH_META_LIST SwishResultMetaList( SW_RESULT );"
This is like \fISwishMetaList()\fR above but determines the index to use from a result
object.
.IP "\s-1SWISH_META_LIST\s0 SwishResultPropertyList( \s-1SW_RESULT\s0 );" 4
.IX Item "SWISH_META_LIST SwishResultPropertyList( SW_RESULT );"
This is like \fISwishPropertyList()\fR above but like \fISwishResultMetaList()\fR uses a
result object instead of an index name.
.IP "const char *SwishMetaName( \s-1SW_META\s0 );" 4
.IX Item "const char *SwishMetaName( SW_META );"
Given a \s-1SW_META\s0 object returned by one of the above, this function
will return the meta/property's name.  You can use this name to access a
property's value for a given as described above.
.IP "int SwishMetaType( \s-1SW_META\s0 );" 4
.IX Item "int SwishMetaType( SW_META );"
Get the data type for the given meta/property. Known types are listed in 
swish\-e.h
.IP "SwishMetaID( \s-1SW_META\s0 );" 4
.IX Item "SwishMetaID( SW_META );"
Get the internal \s-1ID\s0 number for the given meta/property.  These id's are
unique per index file but are not unique per results.
.Sh "Checking for Errors"
.IX Subsection "Checking for Errors"
You should check for errors after all calls.  The last error is stored in the
swish handle object, and is only valid until the next operation (which resets
the error flags).  
.PP
Currently, some errors are flagged as \*(L"critical\*(R" errors.  In these cases you should
destroy (by calling the \fISwishClose()\fR function ) the current swish handle.  If you have
other objects in scope (e.g. a search object or results object) destroy those first.
.PP
The types of errors that are critical can be seen in src/error.c.
Currently the list includes:
.PP
.Vb 6
\&    Could not open index file
\&    Unknown index file format
\&    Index file(s) is empty
\&    Index file error
\&    Invalid swish handle
\&    Invalid results object
.Ve
.IP "int  SwishError( \s-1SW_HANDLE\s0 );" 4
.IX Item "int  SwishError( SW_HANDLE );"
This returns true if an error condition exists.  It returns the error number, which
is a integer less than zero on error.  This should be checked before calling any of the other
error functions below.
.IP "const char *SwishErrorString( \s-1SW_HANDLE\s0 );" 4
.IX Item "const char *SwishErrorString( SW_HANDLE );"
This returns a general text description of the current error.
.IP "const char *SwishLastErrorMsg( \s-1SW_HANDLE\s0 );" 4
.IX Item "const char *SwishLastErrorMsg( SW_HANDLE );"
In some cases this will return a string with specifics about the current error.
For example, \fISwishErrorString()\fR may return \*(L"Unknown metaname\*(R", but \fISwishLastErrorMsg()\fR
will return a string with the name of the unknown metaname.
.IP "int  SwishCriticalError( \s-1SW_HANDLE\s0 );" 4
.IX Item "int  SwishCriticalError( SW_HANDLE );"
Returns true if the current error condition is a critical error.
On critical errors you should free up any current objects and call \fISwishClose()\fR
as swish may be in an unstable state.
.IP "void SwishAbortLastError( \s-1SW_HANDLE\s0 );" 4
.IX Item "void SwishAbortLastError( SW_HANDLE );"
This is a convenience  function that will format and print the last error message, and
then abort the program.
.IP "void set_error_handle( \s-1FILE\s0 *where );" 4
.IX Item "void set_error_handle( FILE *where );"
Sets where errors and warnings are printed (when printed by swish).
For historical reasons, when swish-e first starts up errors and warnings are
sent to stdout.
.IP "void SwishErrorsToStderr( void );" 4
.IX Item "void SwishErrorsToStderr( void );"
A convenience method to send errors to stderr instead of stdout.
.Sh "Utility Functions"
.IX Subsection "Utility Functions"
.IP "const char *SwishWordsByLetter(\s-1SWISH\s0 * sw, char *indexname, char c);" 4
.IX Item "const char *SwishWordsByLetter(SWISH * sw, char *indexname, char c);"
Returns all the words in the index \*(L"indexname\*(R" that begin with the letter passed in.
Returns \s-1NULL\s0 if the name of the index file is invalid.
.Sp
This fuction may change in the future since only 8\-bit chars can currently be used.
.IP "char * SwsishStemWord( \s-1SW_HANDLE\s0 sw, char *in_word );" 4
.IX Item "char * SwsishStemWord( SW_HANDLE sw, char *in_word );"
Deprecated
.Sp
This can be used to convert a word to its stem.  It uses only the 
original Porter Stemmer.
.IP "\s-1SW_FUZZYWORD\s0 SwishFuzzyWord( \s-1SW_RESULT\s0 r, char *word );" 4
.IX Item "SW_FUZZYWORD SwishFuzzyWord( SW_RESULT r, char *word );"
Stems \*(L"word\*(R" based on the fuzzy mode selected during indexing.
.Sp
The fuzzy mode used during indexing is stored in the index file.
Since each result is linked to a given index file this method allows
stemming a word based on it's index file.
.Sp
One possible use for this is to highlight search terms in a document 
summary, which would be based on a given result.
.Sp
The methods below can be used to access the data returned.  The 
\&\s-1SW_FUZZYWORD\s0 object must be freed when done to avoid a memory leak.
.IP "const char **SwishFuzzyWordList( \s-1SW_FUZZYWORD\s0 fw );" 4
.IX Item "const char **SwishFuzzyWordList( SW_FUZZYWORD fw );"
Returns a null terminated list of strings returned by the stemmer.  In most
cases this will be a single string.
.Sp
Here's an example:
.Sp
.Vb 8
\&    SW_FYZZYWORD fuzzy_word = SwishFuzzyWord( result );
\&    const char **word_list = SwishFuzzyWordList( fuzzy_word );
\&    while ( *word_list )
\&    {
\&        printf("%s\en", *word_list );
\&        word_list++;
\&    }
\&    SwishFuzzyWordFree( fuzzy_word );
.Ve
.Sp
If the stemmer does not convert the string (for example attempting to 
stem numeric data) the word_list will contain the original word.
To tell if the stemmer actually stemmed the word check the return value with 
\&\fISwishFuzzyWordError()\fR.
.IP "int SwishFuzzyWordError( \s-1SW_FUZZYWORD\s0 fw );" 4
.IX Item "int SwishFuzzyWordError( SW_FUZZYWORD fw );"
This returns zero if the stemming operation was sucessfull, otherwise it
returns a value indicating the reason the word was not stemmed.  The return
values are defined in the swish-e src/stemmer.h file.
.Sp
Not all stemmers set this value correctly.  But since \fISwishFuzzyWordList()\fR 
will return a valid string regardless of the return value, you can often 
just ignore this setting.  That's what I do.
.IP "int SwishFuzzyWordCount( \s-1SW_FUZZYWORD\s0 fw );" 4
.IX Item "int SwishFuzzyWordCount( SW_FUZZYWORD fw );"
Returns the count of string in the word list available by calling 
\&\fISwishFuzzyWordList()\fR.
.Sp
This is normally just one, but in the case of DoubleMetaphone it can be one 
or two (i.e. DoubleMetaphone can return one or two strings).
.IP "const char *SwishFuzzyMode( \s-1SW_RESULT\s0 r );" 4
.IX Item "const char *SwishFuzzyMode( SW_RESULT r );"
Returns the name of the stemmer used for the given result (which is related 
to an index).
.IP "void SwishFuzzyWordFree( \s-1SW_FUZZYWORD\s0 fw );" 4
.IX Item "void SwishFuzzyWordFree( SW_FUZZYWORD fw );"
Frees the memory used by  the \s-1SW_FUZZYWORD\s0.
.SH "Bug-Reports"
.IX Header "Bug-Reports"
Please report bug reports to the Swish-e discussion group.
Feel also free to improve or enhance this feature.
.SH "Author"
.IX Header "Author"
Original interface: Aug 2000 Jose Ruiz jmruiz@boe.es
.PP
Updated: Aug 22, 2002 \- Bill Moseley
.PP
Interface redesigned for Swish-e version 2.3 Oct 17, 2002 \- Bill Moseley
.SH "Document Info"
.IX Header "Document Info"
$Id: \s-1SWISH\-LIBRARY\s0.pod 1906 2007\-02\-07 19:25:16Z moseley $
.PP
\&.
